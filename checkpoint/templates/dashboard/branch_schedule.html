<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule - {{ business.name }}</title>

      <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
</head>
<body>
    <h1>Schedule for {{ business.name }}</h1>

    <p>
        <a href="{% url 'dashboard' %}">
            <button type="button">Back to Dashboard</button>
        </a>

        <a href="{% url 'create_shift' business.id %}">
            <button type="button">Create New Shift</button>
        </a>
    </p>

    <hr>

    <div id="calendar"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const calendar = new FullCalendar.Calendar(document.getElementById('calendar'), {
                initialView: 'timeGridWeek',   // better for work schedules
                height: "auto",
                nowIndicator: true,
                events: "{% url 'branch_shifts_json' business.id %}",

                eventClick: function(info) {
                    const shiftId = info.event.id;
                    const deleteUrl = `/branches/{{ business.id }}/schedule/shifts/${shiftId}/delete/`;
                    if (confirm('Do you want to delete this shift?')) {
                        window.location.href = deleteUrl;
                    }
                }
            }
        );
            calendar.render();
        });

    </script>
</body>
</html>